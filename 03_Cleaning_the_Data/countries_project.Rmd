---
title: "Cleaning Data Project"
author: "DataTrail Team"
output: html_notebook
---

# Cleaning Data Project

## The goal of this analysis

<Write here what the goal of this analysis is. What question are we trying to answer?> 

## Set up 

Let's load these packages for use. 

```{r}
## you can add more, or change...these are suggestions
library(tidyverse)
library(readr)
library(dplyr)
library(ggplot2)
library(tidyr)
```

## Set up directories

Here we are going to make a data directory if it doesn't already exist. 

```{r}
if (!dir.exists("data")) {
  dir.create("data")
}
```

## Getting the data 

We'll be using datasets from the UN statistics database.

UN datasets can be found here: https://unstats.un.org/unsd/demographic-social/products/dyb/index.cshtml#censusdatasets 

### Read in 'Population by literacy, age, sex and urban/rural residence' dataset

This dataset is from: https://unstats.un.org/unsd/demographic-social/products/dyb/index.cshtml#censusdatasets and the raw form of it has been loaded into the `data/raw` folder for you. The file itself is named `UNdata_Export_20220912_213547955.csv` which is not super clear or informative. 

We have written out the file path for you below. Use this file path and read the dataset in using `read_csv()` and assign it the name `literacy_df`.

```{r}
# Here's the file path to the literacy data
literacy_datafile <- file.path("data", "raw", "UNdata_Export_20220912_213547955.csv")

# Read in the file
literacy_df <- read_csv(literacy_datafile)
```

### What's in these datasets? 

Explore your new `literacy_df` data frame using functions we've discussed to get acquainted with what kinds of variables are in both of these data frames. 

```{r}
colnames(literacy_df)
```
## Clean the data 

### Neaten column names 

You'll notice `literacy_df` has a lot of column names with spaces, and annoying capitalization. 

To fix these column names easily, we are going to use the `janitor::clean_names()` function. 

If you are unsure how to use this function, remember you can do `?janitor::clean_names` to look up information about it. 

Use `janitor::clean_names()` function with `literacy_df`. 

```{r}
literacy_df <- literacy_df %>% 
  janitor::clean_names()
```

### Reshape the data 

You'll notice this dataset is a very very long format data. 

The `sex`, `age`, `literacy`, and `record_type` are noting different variable types. 

Let's reshape this so that each of these variables listed in those columns has its own column!

```{r}
literacy_df %>% 
  pivot_wider(
    id_cols = country_or_area, 
    names_from = c(sex, literacy),
    names_glue = "{literacy}_{sex}",
    values_from = value)

```


### Explore missing data

Before you do analyses, its good practice to understand how much missing data you have in your datasets. 

Look up the function: `naniar::miss_var_summary()` and figure out how to use it to see how many missing data points you have for each variable.

Repeat this for both `countries_df` and `militaries_df`. 

```{r}
naniar::miss_var_summary(countries_df)
```

```{r}
naniar::miss_var_summary(militaries_df)
```
